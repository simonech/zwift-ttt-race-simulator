# Zwift TTT race simulator

A workout generator for **Team Time Trial (TTT)** racing on Zwift (both ZRL and WTRL), designed to help coaches and teams **rehearse race strategy** and **experience realistic race dynamics** in ERG mode.

While races are held on Zwift, the generated workouts can be used on **any cycling platform** that supports ERG-controlled trainers.

---

## ğŸš´ Motivation

Team Time Trial racing is not just about FTP â€” itâ€™s about:

- Pull duration and rotation order
- Drafting dynamics
- Smooth transitions
- Managing fatigue over time
- Surviving climbs as a team

Most existing tools focus on **optimizing a race plan**, but there is a gap between *having a plan* and *knowing if your riders can execute it*.

This project aims to close that gap by allowing teams to **simulate their race as a structured workout**, so riders can:

- Feel the real effort of the planned rotations
- Identify weak points before race day
- Fine-tune pacing and pull durations
- Train specifically for upcoming events


## ğŸ¯ Goals

- Simulate a Zwift TTT race using a deterministic rotation model
- Generate **one workout per rider**, reflecting their exact role in the rotation
- Allow riders to train the race effort in ERG mode
- Provide a foundation for future race simulation and coaching insights


## ğŸ§  Core Concepts

### Rotation-based simulation

- Riders rotate through lead, draft, and last-wheel positions
- Each rider has:
  - A pull duration
  - A power target per position (1st, 2nd, 3rd, 4th+)
- When a rider finishes their pull:
  - They rotate to the back
  - Other riders move up one position
- The pull leader defines the duration of the block for all riders

This creates a realistic, repeatable simulation of a TTT paceline.


## ğŸ“¥ Inputs

The simulator expects an input model describing:

- Riders (name, pull duration)
- Target power per position
- Rotation order

In practice, this input can be:
- Hand-crafted
- Generated by third-party Zwift TTT optimization tools
- Tuned by a coach based on rider feedback


## ğŸ“¤ Outputs

- One structured workout per rider
- Exported as XML-based workout files (e.g. Zwift `.zwo` / WKO-compatible formats)
- Workouts can be executed on:
  - Zwift
  - TrainerRoad
  - Wahoo SYSTM
  - Any platform supporting ERG mode workouts

---

## ğŸ§ª Development approach

This project is developed using **Test-Driven Development (TDD)**:

- Rotation logic is covered by unit tests
- Example-based tests validate known TTT scenarios
- Future extensions are added without breaking existing behavior

This ensures the simulator remains predictable and safe to extend.

---

## ğŸ›£ï¸ Roadmap (planned features)

The current implementation focuses on **basic rotation simulation**. Planned enhancements include:

- ğŸ•’ **Race durationâ€“based pull estimation**  
  Automatically compute the number of pulls required to reach a target race time.

- ğŸš¦ **Race start simulation**  
  Initial effort block simulating the start from the gate before drafting is effective.

- ğŸ”„ **Transition dynamics**  
  Model ease-off and re-acceleration when dropping from lead to last position.

- â›°ï¸ **Climb-aware pacing**  
  Support w/kg-based pacing sections to better simulate climbs where absolute power pacing breaks down.

- ğŸ“Š **Effort and fatigue analysis**  
  Estimate which riders are likely to struggle and where.

- ğŸ§  **Coaching insights**  
  Identify limiting riders and suggest rotation or pacing adjustments.

---

## ğŸ‘¥ Target audience

- Zwift TTT coaches
- Competitive TTT teams (ZRL, WTRL, private leagues)
- Riders who want to better understand their role in a team effort
- Developers interested in cycling simulation tools

---

## ğŸ¤ Contributions

Contributions are welcome!

Whether itâ€™s:
- improving the simulation model
- adding exporters
- improving test coverage
- refining documentation

Feel free to open an issue or submit a pull request.

---

## âš ï¸ Disclaimer

This tool is **not affiliated with Zwift**.
Zwift is a registered trademark of Zwift, Inc.

The simulator aims to approximate race dynamics for training and planning purposes and does not guarantee identical in-game results.

---

## ğŸ“„ License

This project is licensed under the MIT License â€“ see the [LICENSE](LICENSE) file for details.
